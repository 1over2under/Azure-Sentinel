[
  {
    "name": "SalesforceServiceCloudPolling",
    "apiVersion": "2022-12-01-preview",
    "type": "Microsoft.SecurityInsights/dataConnectors",
    "location": "{{location}}",
    "kind": "RestApiPoller",
    "properties": {
      "connectorDefinitionName": "SalesForceServiceCloudCCPDefinition",
      "dataType": "SalesforceServiceCloud_CL",
      "dcrConfig": {
        "dataCollectionEndpoint": "{{dataCollectionEndpoint}}",
        "dataCollectionRuleImmutableId": "{{dataCollectionRuleImmutableId}}",
        "streamName": "Custom-SalesforceServiceCloud_CL"
      },
      "auth": {
        "type": "OAuth2",
        "ClientSecret": "{{clientSecret}}",
        "ClientId": "{{clientId}}",
        "TokenEndpoint": "https://java-flow-1927.my.salesforce.com/services/oauth2/token",
        "tokenEndpointHeaders": {
          "Accept": "application/json",
          "Content-Type": "application/x-www-form-urlencoded"
        },
        "TokenEndpointQueryParameters": {},
        "grantType": "client_credentials"
      },
      "request": {
        "apiEndpoint": "https://java-flow-1927.my.salesforce.com/services/data/v44.0/sobjects/EventLogFile/0ATHr000003IlaFOAS/LogFile",
        "httpMethod": "GET",
        "retryCount": 3,
        "timeoutInSeconds": 60,
        "headers": {
          "Accept": "application/json",
          "User-Agent": "Scuba"
        }
      },
      "response": {
        "format": "csv",
        "eventsJsonPaths": [ "$" ],
        "HasCsvHeader": true
      }
    }
  }
]
