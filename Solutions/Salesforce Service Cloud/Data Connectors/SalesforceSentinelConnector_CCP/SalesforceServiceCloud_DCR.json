[
  {
    "name": "SalesForceServiceCloudDCR",
    "apiVersion": "2021-09-01-preview",
    "type": "Microsoft.Insights/dataCollectionRules",
    "location": "{{location}}",
    "properties": {
      "dataCollectionEndpointId": "{{dataCollectionEndpointId}}",
      "streamDeclarations": {
        "Custom-SalesforceServiceCloud_CL": {
          "columns": [
            {
              "name": "EVENT_TYPE",
              "type": "string"
            },
            {
              "name": "TIMESTAMP",
              "type": "string"
            },
            {
              "name": "REQUEST_ID",
              "type": "string"
            },
            {
              "name": "ORGANIZATION_ID",
              "type": "string"
            },
            {
              "name": "USER_ID",
              "type": "string"
            },
            {
              "name": "API_FAMILY",
              "type": "string"
            },
            {
              "name": "API_VERSION",
              "type": "string"
            },
            {
              "name": "API_RESOURCE",
              "type": "string"
            },
            {
              "name": "CLIENT_NAME",
              "type": "string"
            },
            {
              "name": "HTTP_METHOD",
              "type": "string"
            },
            {
              "name": "CLIENT_IP",
              "type": "string"
            },
            {
              "name": "COUNTS_AGAINST_API_LIMIT",
              "type": "string"
            },
            {
              "name": "CONNECTED_APP_ID",
              "type": "string"
            },
            {
              "name": "ENTITY_NAME",
              "type": "string"
            },
            {
              "name": "STATUS_CODE",
              "type": "string"
            },
            {
              "name": "CONNECTED_APP_NAME",
              "type": "string"
            },
            {
              "name": "USER_NAME",
              "type": "string"
            },
            {
              "name": "TIMESTAMP_DERIVED",
              "type": "string"
            }
          ]
        }
      },
      "destinations": {
        "logAnalytics": [
          {
            "workspaceResourceId": "{{workspaceResourceId}}",
            "name": "clv2ws1"
          }
        ]
      },
      "dataFlows": [
        {
          "streams": ["Custom-SalesforceServiceCloud_CL"],
          "destinations": ["clv2ws1"],
          "transformKql": "source | extend TimeGenerated = todatetime(TIMESTAMP_DERIVED)",
          "outputStream": "Custom-SalesforceServiceCloud_CL"
        }
      ]
    }
  }
]
