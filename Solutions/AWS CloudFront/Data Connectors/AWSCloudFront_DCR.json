[
	{
		"name": "AWSCloudFront_DCR",
		"apiVersion": "2021-09-01-preview",
		"type": "Microsoft.Insights/dataCollectionRules",
		"location": "{{location}}",
		"kind": null,
		"properties": {
			"dataCollectionEndpointId": "{{dataCollectionEndpointId}}",
			"streamDeclarations": {
				"Custom-AwsCloudfront-AccessLog": {
					"columns": [
						{
							"name": "date",
							"type": "string"
						},
						{
							"name": "time",
							"type": "string"
						},
						{
							"name": "x-edge-location",
							"type": "string"
						},
						{
							"name": "sc-bytes",
							"type": "string"
						},
						{
							"name": "c-ip",
							"type": "string"
						},
						{
							"name": "cs-method",
							"type": "string"
						},
						{
							"name": "['cs(Host)']",
							"type": "string"
						},
						{
							"name": "cs-uri-stem",
							"type": "string"
						},
						{
							"name": "sc-status",
							"type": "string"
						},
						{
							"name": "['cs(Referer)']",
							"type": "string"
						},
						{
							"name": "['cs(User-Agent)']",
							"type": "string"
						},
						{
							"name": "cs-uri-query",
							"type": "string"
						},
						{
							"name": "['cs(Cookie)']",
							"type": "string"
						},
						{
							"name": "x-edge-result-type",
							"type": "string"
						},
						{
							"name": "x-edge-request-id",
							"type": "string"
						},
						{
							"name": "x-host-header",
							"type": "string"
						},
						{
							"name": "cs-protocol",
							"type": "string"
						},
						{
							"name": "cs-bytes",
							"type": "string"
						},
						{
							"name": "time-taken",
							"type": "string"
						},
						{
							"name": "x-forwarded-for",
							"type": "string"
						},
						{
							"name": "ssl-protocol",
							"type": "string"
						},
						{
							"name": "ssl-cipher",
							"type": "string"
						},
						{
							"name": "x-edge-response-result-type",
							"type": "string"
						},
						{
							"name": "cs-protocol-version",
							"type": "string"
						},
						{
							"name": "fle-status",
							"type": "string"
						},
						{
							"name": "fle-encrypted-fields",
							"type": "string"
						},
						{
							"name": "c-port",
							"type": "string"
						},
						{
							"name": "time-to-first-byte",
							"type": "string"
						},
						{
							"name": "x-edge-detailed-result-type",
							"type": "string"
						},
						{
							"name": "sc-content-type",
							"type": "string"
						},
						{
							"name": "sc-content-len",
							"type": "string"
						},
						{
							"name": "sc-range-start",
							"type": "string"
						},
						{
							"name": "sc-range-end",
							"type": "string"
						}
					]
				}
			},
			"destinations": {
				"logAnalytics": [
					{
						"workspaceResourceId": "{{workspaceResourceId}}",
						"name": "clv2ws1"
					}
				]
			},
			"dataFlows": [
				{
					"streams": [
						"Custom-AwsCloudfront-AccessLog"
					],
					"destinations": [
						"clv2ws1"
					],
					"transformKql": "source | extend TimeGenerated = now() | project TimeGenerated",
					"outputStream": "Custom-AWSCloudFront_AccessLog_CL"
				}
			]
		}
	}
]